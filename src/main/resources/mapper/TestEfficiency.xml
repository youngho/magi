<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.famos.bets.efficiencyAnalysis.testEfficiency.mapper.TestEfficiencyMapper">
    <!--
     * BETS-UI-0601
     * Test Efficiency
    -->
    <select id="retrieveTestEfficiency" parameterType="kr.famos.bets.efficiencyAnalysis.testEfficiency.dto.TestEfficiencyCondDto" resultType="kr.famos.bets.efficiencyAnalysis.testEfficiency.dto.TestEfficiencyResultDto">
        SELECT
            PART_NUMBER,
            PROCESS_CODE,
            MAIN_PROGRAM_NAME,
            TESTER_MODEL,
            PARA,
            SHOT_END_TIME - SHOT_START_TIME AS TEST_TIME
        FROM CASI_BIN
        <where>
            1 = 1
            <if test=" endTimeStart != null and endTimeStart != '' ">
                AND END_TIME >= #{endTimeStart}
            </if>
            <if test=" endTimeEnd != null and endTimeEnd != '' ">
                AND END_TIME <![CDATA[<=]]> #{endTimeEnd}
            </if>
            <if test=" partNumber != null and partNumber != '' ">
                AND PART_NUMBER=#{partNumber}
            </if>
            <if test=" processCode != null and processCode != '' ">
                AND PROCESS_CODE=#{processCode}
            </if>
            <if test=" mainProgramName != null and mainProgramName != '' ">
                AND MAIN_PROGRAM_NAME=#{mainProgramName}
            </if>
        </where>
    </select>
</mapper>
